<!DOCTYPE html>
<head>
    <title>Data Vizualization Final Project</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/scrollama"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>
</head>
<body>

    <!-- <h1>
        San Francisco Traffic Accident Trends Over Time
    </h1> -->


    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-yearly" class="chart-container"></div>
        </div>
        <div class="sidebar">
            When looking at the number of accidents occuring each year, there is a clear drop around 2020, and it hasn't returned to normal levels by 2024. 
            <br><br>
            Noticing this difference in the crash trends pre and post Covid, you might wonder what trends you can see over different time periods, and how Covid affected trends over different time periods.
            
        </div>
    </div>

    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-monthly" class="chart-container"></div>
        </div>
        <div class="sidebar">
            Looking at the monthly crashes, if we plot how many crashes happen in daylight compared to those that happen at night, we notice an interesting pattern.
            <br><br>
            We notice that while daylight crashes are for the most part more common, the difference is more extreme in the summer compared to the winter.
            <br><br>
            This could be a combination of shorter days and daylight savings time shifting busier hours to be outside daylight hours.
        </div>
    </div>


    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-monthlyCovid" class="chart-container"></div>
        </div>
        <div class="sidebar">
            Now, if we look at the average number of crashes per year broken up by month, and compare pre and post Covid, we notice that the trends are similar.
            <br><br>
            While January to July have a bigger difference in shape, the overall trends are still mostly similar in shape, just with a reduced number of crashes post Covid
            
        </div>
    </div>

    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-weekly" class="chart-container"></div>
            <div id="chart-container-weeklyGrouped" class="chart-container" style="display:none"></div>
        </div>
        <div class="sidebar">
            <!-- dropdown selection based on https://www.w3schools.com/html/html_form_elements.asp -->
            <label for="chartModeViz3">select a chart mode:</label>
            <select id="chartModeViz3" name="chartMode">
            <option value="defaultViz3">Main Chart</option>
            <option value="weekdayViz3">weekday vs weekend</option>
            </select>
            <button id="submitViz3">update view</button>
            When looking at the number of crashes occuring on each day of the week, the most crashes happen on Friday, while the least happen on Sunday.
            <br><br>
            In fact, the average number of crashes per weekday is higher than the average crashes per day of the weekend.
            <br><br> 
            While you might expect the opposite, since most people are spending large amounts of time on weekdays working, the increase in people during commute hours outweighs this.
        </div>
    </div>

    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-weeklyCovid" class="chart-container"></div>     
        </div>
        <div class="sidebar">
            Now, looking at the average number of crashes over the course of a year on each weekday, when split by pre and post Covid, there is a few things to notice.
            <br><br>
            First, like the monthly trends the overall shape is similar pre and post Covid.
            <br><br>
            In this case however, there is an interesting difference in the shapes. If we look at when the number of crashes pre and post Covid are the closest, we notice that this happens on the weekends.
            <br><br>
            This increased difference on weekdays compared to weekends pre and post Covid could indicate a still ongoing increase in remote work.

            
        </div>
    </div>

    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-hourly" class="chart-container"></div>  
            <div id="chart-container-hourlyMax" class="chart-container" style="display:none;"></div>    
        </div>
        <div class="sidebar">
            <label for="chartModeViz4">select a chart mode:</label>
            <select id="chartModeViz4" name="chartMode">
            <option value="defaultViz4">Main Chart</option>
            <option value="maxViz4">highlightMax</option>
            </select>
            <button id="submitViz4">update view</button>
            When looking at the number of crashes that happen during the course of a year in different neighborhoods, if we break it up by which hour the crash occurs in, we can notice something surprising.
            <br><br>
            While you might expect the hour in which there is the most crashes to be similar in each neighborhood, looking at the chart, we notice this is not the case.
            <br><br>
            Instead, while the Financial district, Mission, and South of Market all peak around 5-6 pm, the Tenderloin peaks much earlier, around 3 pm.
        </div>
    </div>


    <div class="vizContainer">
        <div class="graphic">
            <div id="chart-container-hourlyCovid" class="chart-container"></div>     
        </div>
        <div class="sidebar">
            When looking at how the number of crashes that happened in each hour over the course of a year varies pre and post Covid, there are a few things that stand out.
            <br><br>
            First, like the monthly and day of week covid trends, the pre and post Covid trends are very similar.
            <br><br>
            In contrast to those charts however, the hourly covid trend actually shows the post Covid crashes surpassing the pre Covid crashes at some times.
            <br><br>
            Additionally, the difference between pre and post Covid seems most pronounced during daylight hours.
            <br><br>
            Like in the weekday Covid trends, this could be from a still ongoing increase in remote work.


        </div>
    </div>
    <!-- <script src="viz.js"></script> -->
    <script src="viz1.js" id="yearlyScript"></script>
    <script src="viz2.js" id="monthlyScript"></script>
    <script src="viz2Covid.js" id="monthlyCovidScript"></script>
    <script src="viz3.js" id="weeklyScript"></script>
    <script src="viz3weekend.js" id="weeklyGroupedScript"></script>
    <script src="viz3Covid.js" id="weeklyCovidScript"></script>
    <script src="viz4.js" id="hourlyScript"></script>
    <script src="viz4Covid.js" id="hourlyCovidScript"></script>
    <script src="viz.js"></script>
        The data is from <a href="https://data.sfgov.org/Public-Safety/Traffic-Crashes-Resulting-in-Injury/ubvf-ztfx/about_data">https://data.sfgov.org/Public-Safety/Traffic-Crashes-Resulting-in-Injury/ubvf-ztfx/about_data</a>.

</body>
